(window["webpackJsonpoutdoors-blog"]=window["webpackJsonpoutdoors-blog"]||[]).push([[0],{32:function(e,t,a){e.exports=a(65)},37:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),i=a.n(l),s=(a(37),a(6)),o=a(7),c=a(9),m=a(8),d=a(1),u=a(10),p=a(3),h=a.n(p),v=a(12);var g=function(e){return r.a.createElement("div",{className:"row border border-primary rounded my-4 p-4"},r.a.createElement("div",{className:"col my-auto"},r.a.createElement("h2",null,e.title)),r.a.createElement("div",{className:"col-3 text-right my-auto"},r.a.createElement("button",{onMouseDown:function(e){return e.preventDefault()},className:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#"+e.id,"aria-expanded":"false","aria-controls":"#"+e.id},e.buttonText)),r.a.createElement("div",{className:"col-12 collapse",id:e.id},e.children))};var b=function(e){var t=e.pageRange.map((function(e){return r.a.createElement("option",{value:e},e)})),a=null;return t.length>1&&(a=r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Page: "),r.a.createElement("select",{className:"form-control",value:e.page,onChange:e.onPageChange},t)))),r.a.createElement("div",{className:"row border border-primary rounded mb-4"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row m-4"},r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"titleFilter"},"Filter by title:"),r.a.createElement("input",{className:"form-control",type:"text",id:"titleFilter",value:e.titleFilter,onChange:e.onFilterChange}))),r.a.createElement("div",{className:"col-12 col-lg-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"placeFilter"},"Filter by place:"),r.a.createElement("input",{className:"form-control",type:"text",id:"placeFilter",value:e.placeFilter,onChange:e.onFilterChange}))),r.a.createElement("div",{className:"col-12 col-sm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"monthFilter"},"Filter by month:"),r.a.createElement("input",{className:"form-control",type:"month",id:"monthFilter",value:e.monthFilter,onChange:e.onFilterChange}))),r.a.createElement("div",{className:"col-12 col-sm"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"dateFilter"},"Filter by date:"),r.a.createElement("input",{className:"form-control",type:"date",id:"dateFilter",value:e.dateFilter,onChange:e.onFilterChange}))),a),r.a.createElement("div",{className:"row m-4"},r.a.createElement("div",{className:"col"},r.a.createElement("button",{type:"button",className:"btn btn-primary m-1",onClick:e.onClick,onMouseDown:function(e){return e.preventDefault()}},"Filter"),r.a.createElement("button",{type:"button",className:"btn btn-secondary m-1",onClick:e.onReset,onMouseDown:function(e){return e.preventDefault()}},"Reset")))))};var E=function(e){return r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"modal fade",id:e.id,tabindex:"-1",role:"dialog","aria-labelledby":"ContentItemDetailModalTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},e.title),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"container-fluid"},e.children)),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))};var f=function(e){var t="btn btn-block mt-1 mr-1 btn-"+e.buttonColor;return r.a.createElement("button",{type:"button",className:t,"data-toggle":"modal","data-target":"#"+e.id,onMouseDown:function(e){return e.preventDefault()}},e.children)};var y=function(e){return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 m-4"},r.a.createElement("img",{className:"img-fluid mx-auto d-block",src:e.item.picture})),r.a.createElement("div",{className:"col-6 p-4"},r.a.createElement("p",null,"Date: ",e.item.date)),r.a.createElement("div",{className:"col-6 p-4"},r.a.createElement("p",null,"Place: ",e.item.place)),r.a.createElement("div",{className:"col-12 p-4"},r.a.createElement("p",null,"Description: ",e.item.description)),r.a.createElement("div",{className:"col-12 p-4"},r.a.createElement("p",null,"Comments: ",e.item.comments)))};var N=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"title"+e.id},"Title"),r.a.createElement("input",{name:"title",onChange:e.onValueChange,value:e.title,type:"text",id:"title"+e.id,className:"form-control "+(e.validity.title?"":"is-invalid")}),r.a.createElement("p",{className:"text-danger"},e.errors.title))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"place"+e.id},"Place"),r.a.createElement("input",{name:"place",onChange:e.onValueChange,value:e.place,type:"text",id:"place"+e.id,className:"form-control "+(e.validity.place?"":"is-invalid")}),r.a.createElement("p",{className:"text-danger"},e.errors.place))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"date"+e.id},"Date"),r.a.createElement("input",{name:"date",onChange:e.onValueChange,value:e.date,type:"date",id:"date"+e.id,className:"form-control "+(e.validity.date?"":"is-invalid")}),r.a.createElement("p",{className:"text-danger"},e.errors.date))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"description"+e.id},"Description"),r.a.createElement("textarea",{name:"description",onChange:e.onValueChange,value:e.description,type:"textarea",id:"description"+e.id,className:"form-control "+(e.validity.description?"":"is-invalid")}),r.a.createElement("p",{className:"text-danger"},e.errors.description))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"comments"+e.id},"Comments"),r.a.createElement("textarea",{name:"comments",onChange:e.onValueChange,value:e.comments,type:"textarea",id:"comments"+e.id,className:"form-control"}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"picture"+e.id},"Picture"),r.a.createElement("input",{onChange:e.onImageChange,type:"file",id:"picture"+e.id,accept:"image/png, image/jpeg",className:"custom-file"})))),r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col"},e.children,r.a.createElement("button",{type:"button",className:"btn btn-secondary ml-1",onMouseDown:function(e){return e.preventDefault()},onClick:e.onReset},"Reset")))))},C=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleImageChange=function(e){a.setState({picture:e.target.files[0]})},a.state={title:a.props.item.title,place:a.props.item.place,date:a.props.item.date,description:a.props.item.description,comments:a.props.item.comments,picture:null,validity:{title:!0,place:!0,date:!0,description:!0},errors:{title:"",place:"",date:"",description:""}},a.handleValueChange=a.handleValueChange.bind(Object(d.a)(a)),a.handleReset=a.handleReset.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a.handleImageChange=a.handleImageChange.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"checkValidity",value:function(e,t){var a={title:this.state.validity.title,place:this.state.validity.place,date:this.state.validity.date,description:this.state.validity.description};a[e]=""!==t.trim();var n={title:this.state.errors.title,place:this.state.errors.place,date:this.state.errors.date,description:this.state.errors.description};a[e]?n[e]="":n[e]="Field cannot be blank!",this.setState({validity:a}),this.setState({errors:n})}},{key:"handleValueChange",value:function(e){var t=e.target.value,a=e.target.name,n=Object(v.a)({},a,t);this.setState(n),"comments"!==a&&this.checkValidity(a,t)}},{key:"handleReset",value:function(e){this.setState({title:this.props.item.title,place:this.props.item.place,date:this.props.item.date,description:this.props.item.description,comments:this.props.item.comments,picture:null,validity:{title:!0,place:!0,date:!0,description:!0},errors:{title:"",place:"",date:"",description:""}}),document.getElementById("picture"+this.props.item.pk).value=null}},{key:"handleSubmit",value:function(e){var t=this,a={title:this.state.title,place:this.state.place,date:this.state.date,description:this.state.description,comments:this.state.comments,picture:this.state.picture},n=new FormData;n.append("title",a.title),n.append("place",a.place),n.append("date",a.date),n.append("description",a.description),n.append("comments",a.comments),this.state.picture&&n.append("picture",a.picture);var r={url:"https://eventblog12231.herokuapp.com/dataapis/token-auth-refresh/",method:"POST",headers:{"Content-Type":"application/json"},data:{refresh:localStorage.getItem("refresh")}};h()(r).then((function(e){return e.data.access})).then((function(e){return h()({url:"https://eventblog12231.herokuapp.com/dataapis/outdoordate/"+t.props.item.pk+"/",method:"PATCH",data:n,headers:{Authorization:"Bearer ".concat(e),"content-type":"multipart/form-data"}})})).then((function(){return t.props.refreshList()})).then((function(){return t.handleReset()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=Object.values(this.state.validity).indexOf(!1)>-1;return r.a.createElement(N,{title:this.state.title,place:this.state.place,date:this.state.date,description:this.state.description,comments:this.state.comments,picture:this.state.picture,onValueChange:this.handleValueChange,onReset:this.handleReset,onImageChange:this.handleImageChange,id:this.props.item.pk,validity:this.state.validity,errors:this.state.errors},r.a.createElement("button",{type:"button",className:"btn btn-primary",onMouseDown:function(e){return e.preventDefault()},onClick:this.handleSubmit,disabled:e,"data-dismiss":"modal"},"Edit"))}}]),t}(r.a.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleDelete=a.handleDelete.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleDelete",value:function(e){var t=this,a={url:"https://eventblog12231.herokuapp.com/dataapis/token-auth-refresh/",method:"POST",headers:{"Content-Type":"application/json"},data:{refresh:localStorage.getItem("refresh")}};h()(a).then((function(e){return e.data.access})).then((function(e){h()({url:"https://eventblog12231.herokuapp.com/dataapis/outdoordate/"+t.props.item.pk+"/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}})})).then((function(){return t.props.refreshList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Delete ",this.props.item.title,"?"),r.a.createElement("button",{name:this.props.item.pk,className:"btn btn-danger",onClick:this.handleDelete,"data-dismiss":"modal"},"Confirm Delete")))}}]),t}(r.a.Component);var F=function(e){return r.a.createElement("div",{className:"col-lg-6 col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col border border-primary rounded m-4"},r.a.createElement("div",{className:"row px-4 pt-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Title: ",e.item.title)),r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Date: ",e.item.date)),r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Place: ",e.item.place))),r.a.createElement("div",{className:"row mb-4 px-4"},r.a.createElement("div",{className:"col-12 col-sm-4"},r.a.createElement(f,{id:e.item.pk,buttonColor:"primary"},"Details")),r.a.createElement("div",{className:"col-12 col-sm-4"},r.a.createElement(f,{id:e.item.pk+"edit",buttonColor:"secondary"},"Edit")),r.a.createElement("div",{className:"col-12 col-sm-4"},r.a.createElement(f,{id:e.item.pk+"del",buttonColor:"danger pull-right"},"Delete")),r.a.createElement(E,{id:e.item.pk,title:e.item.title},r.a.createElement(y,{item:e.item})),r.a.createElement(E,{id:e.item.pk+"edit",title:"Edit "+e.item.title},r.a.createElement(C,{item:e.item,refreshList:e.refreshList})),r.a.createElement(E,{id:e.item.pk+"del",title:"Delete "+e.item.title},r.a.createElement(k,{item:e.item,refreshList:e.refreshList}))))))},w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).handleImageChange=function(e){a.setState({picture:e.target.files[0]})},a.state={title:"",place:"",date:"",description:"",comments:"",picture:null,validity:{title:!1,place:!1,date:!1,description:!1},errors:{title:"Field cannot be blank!",place:"Field cannot be blank!",date:"Field cannot be blank!",description:"Field cannot be blank!"}},a.handleValueChange=a.handleValueChange.bind(Object(d.a)(a)),a.handleReset=a.handleReset.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a.handleImageChange=a.handleImageChange.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"checkValidity",value:function(e,t){var a={title:this.state.validity.title,place:this.state.validity.place,date:this.state.validity.date,description:this.state.validity.description};a[e]=""!==t.trim();var n={title:this.state.errors.title,place:this.state.errors.place,date:this.state.errors.date,description:this.state.errors.description};a[e]?n[e]="":n[e]="Field cannot be blank!",this.setState({validity:a}),this.setState({errors:n})}},{key:"handleValueChange",value:function(e){var t=e.target.value,a=e.target.name,n=Object(v.a)({},a,t);this.setState(n),"comments"!==a&&this.checkValidity(a,t)}},{key:"handleReset",value:function(e){this.setState({title:"",place:"",date:"",description:"",comments:"",picture:null,validity:{title:!1,place:!1,date:!1,description:!1},errors:{title:"Field cannot be blank!",place:"Field cannot be blank!",date:"Field cannot be blank!",description:"Field cannot be blank!"}}),document.getElementById("picturecreateForm").value=null}},{key:"handleSubmit",value:function(e){var t=this,a={title:this.state.title,place:this.state.place,date:this.state.date,description:this.state.description,comments:this.state.comments,picture:this.state.picture},n=new FormData;n.append("title",a.title),n.append("place",a.place),n.append("date",a.date),n.append("description",a.description),n.append("comments",a.comments),this.state.picture&&n.append("picture",a.picture);var r={url:"https://eventblog12231.herokuapp.com/dataapis/token-auth-refresh/",method:"POST",headers:{"Content-Type":"application/json"},data:{refresh:localStorage.getItem("refresh")}};h()(r).then((function(e){return e.data.access})).then((function(e){return h()({url:"https://eventblog12231.herokuapp.com/dataapis/outdoordate/",method:"POST",data:n,headers:{Authorization:"Bearer ".concat(e),"content-type":"multipart/form-data"}})})).then((function(){return t.props.refreshList()})).then((function(){return t.handleReset()})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=Object.values(this.state.validity).indexOf(!1)>-1;return r.a.createElement(N,{title:this.state.title,place:this.state.place,date:this.state.date,description:this.state.description,comments:this.state.comments,picture:this.state.picture,onValueChange:this.handleValueChange,onReset:this.handleReset,onImageChange:this.handleImageChange,id:"createForm",validity:this.state.validity,errors:this.state.errors},r.a.createElement("button",{type:"button",className:"btn btn-primary",onMouseDown:function(e){return e.preventDefault()},onClick:this.handleSubmit,disabled:e,"data-toggle":"collapse","data-target":"#"+this.props.id},"Create"))}}]),t}(r.a.Component),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={titleFilter:"",placeFilter:"",dateFilter:"",monthFilter:"",resultsPerPage:100,page:1,totalResults:0,queryset:[]},a.handleFilterChange=a.handleFilterChange.bind(Object(d.a)(a)),a.refreshList=a.refreshList.bind(Object(d.a)(a)),a.handleReset=a.handleReset.bind(Object(d.a)(a)),a.handlePageChange=a.handlePageChange.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.refreshList()}},{key:"refreshList",value:function(){var e=this,t="https://eventblog12231.herokuapp.com/dataapis/outdoordate/?page="+this.state.page+"&";this.state.titleFilter&&(t+="title="+this.state.titleFilter+"&"),this.state.dateFilter?t+="date="+this.state.dateFilter+"&":this.state.monthFilter&&(t+="date="+this.state.monthFilter+"&"),this.state.placeFilter&&(t+="place="+this.state.placeFilter+"&");var a={url:"https://eventblog12231.herokuapp.com/dataapis/token-auth-refresh/",method:"POST",headers:{"Content-Type":"application/json"},data:{refresh:localStorage.getItem("refresh")}};h()(a).then((function(e){return e.data.access})).then((function(e){return h()({url:t,headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){return e.setState({queryset:t.data.results,totalResults:t.data.count})})).catch((function(e){return console.log(e)}))}},{key:"handleFilterChange",value:function(e){var t=e.target.value,a=e.target.id,n=Object(v.a)({},a,t);"monthFilter"===a?n.dateFilter="":"dateFilter"===a&&(n.monthFilter=""),this.setState(n)}},{key:"handleReset",value:function(e){var t=this;this.setState({titleFilter:"",placeFilter:"",dateFilter:"",monthFilter:"",page:1},(function(){return t.refreshList()}))}},{key:"handlePageChange",value:function(e){var t=e.target.value;this.setState({page:t})}},{key:"render",value:function(){var e,t=this;e=0===this.state.queryset.length?r.a.createElement("div",{className:"col text-center pb-4"},r.a.createElement("h3",null,"Nothing here!")):this.state.queryset.map((function(e){return r.a.createElement(F,{key:e.pk,item:e,refreshList:t.refreshList})}));var a=Array.from({length:Math.ceil(this.state.totalResults/100)},(function(e,t){return t+1}));return r.a.createElement("div",{className:"container"},r.a.createElement(g,{id:"createForm",buttonText:"Show",title:"Create new entry"},r.a.createElement(w,{id:"createForm",refreshList:this.refreshList})),r.a.createElement(b,{onFilterChange:this.handleFilterChange,onPageChange:this.handlePageChange,titleFilter:this.state.titleFilter,placeFilter:this.state.placeFilter,dateFilter:this.state.dateFilter,monthFilter:this.state.monthFilter,page:this.state.page,pageRange:a,onClick:this.refreshList,onReset:this.handleReset}),r.a.createElement("div",{class:"row justify-content-between mx-4"},e))}}]),t}(r.a.Component);var j=function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{className:"my-auto"},"Current User: ",r.a.createElement("span",{className:"text-primary"},e.currentUser))),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{type:"button",className:"btn btn-sm btn-secondary my-auto",onClick:e.onLogout},"logout"))))},O=a(4);var x=function(e){var t,a=e.handleLogin;return e.error&&(t=r.a.createElement("p",{className:"text-danger"},e.error)),r.a.createElement("div",{className:"container border border-primary rounded my-4"},r.a.createElement("div",{className:"row px-4 pt-4"},r.a.createElement("div",{className:"col"},r.a.createElement("h2",null,"Login"))),r.a.createElement("div",{className:"row p-4"},r.a.createElement("div",{className:"col"},r.a.createElement(O.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},onSubmit:function(e,t){var n=t.setSubmitting;a(e),n(!1)}},(function(e){var a=e.touched,n=e.errors,l=e.isSubmitting;return r.a.createElement(O.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"loginUsername"},"Username:"),r.a.createElement(O.b,{type:"text",id:"loginUsername",name:"username",className:"form-control ".concat(a.username&&n.username?"is-invalid":"")}),r.a.createElement(O.a,{name:"username",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"loginPassword"},"Password:"),r.a.createElement(O.b,{id:"loginPassword",type:"password",name:"password",className:"form-control ".concat(a.password&&n.password?"is-invalid":"")}),r.a.createElement(O.a,{name:"password",component:"div",className:"text-danger"})),t,r.a.createElement("button",{type:"submit",disabled:l,className:"btn btn-primary my-4"},"Login"))})))))};var D=function(e){var t,a=e.handleSignup;return e.error&&(t=r.a.createElement("p",{className:"text-danger"},e.error)),r.a.createElement("div",{className:"container border border-primary rounded my-4"},r.a.createElement("div",{className:"row px-4 pt-4"},r.a.createElement("div",{className:"col"},r.a.createElement("h2",null,"Signup"))),r.a.createElement("div",{className:"row p-4"},r.a.createElement("div",{className:"col"},r.a.createElement(O.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},onSubmit:function(e,t){var n=t.setSubmitting;a(e),n(!1)}},(function(e){var a=e.touched,n=e.errors,l=e.isSubmitting;return r.a.createElement(O.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"signupUsername"},"Username:"),r.a.createElement(O.b,{type:"text",id:"signupUsername",name:"username",className:"form-control ".concat(a.username&&n.username?"is-invalid":"")}),r.a.createElement(O.a,{name:"username",component:"div",className:"text-danger"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"signupPassword"},"Password:"),r.a.createElement(O.b,{type:"password",id:"signupPassword",name:"password",className:"form-control ".concat(a.password&&n.password?"is-invalid":"")}),r.a.createElement(O.a,{name:"password",component:"div",className:"text-danger"})),t,r.a.createElement("button",{type:"submit",disabled:l,className:"btn btn-primary my-4"},"Signup"))})))))},L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={username:"",loginError:"",signupError:""},a.handleLogin=a.handleLogin.bind(Object(d.a)(a)),a.handleLogout=a.handleLogout.bind(Object(d.a)(a)),a.handleSignup=a.handleSignup.bind(Object(d.a)(a)),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={url:"https://eventblog12231.herokuapp.com/dataapis/token-auth-refresh/",method:"POST",headers:{"Content-Type":"application/json"},data:{refresh:localStorage.getItem("refresh")}};h()(t).then((function(e){return e.data.access})).then((function(e){return h()({url:"https://eventblog12231.herokuapp.com/dataapis/current-user",headers:{Authorization:"Bearer ".concat(e)}})})).then((function(t){e.setState({username:t.data.username})}))}},{key:"handleLogin",value:function(e){var t=this,a={url:"https://eventblog12231.herokuapp.com/dataapis/token-auth-pair/",method:"POST",headers:{"Content-Type":"application/json"},data:e};h()(a).then((function(e){return localStorage.setItem("refresh",e.data.refresh),h()({url:"https://eventblog12231.herokuapp.com/dataapis/current-user",headers:{Authorization:"Bearer ".concat(e.data.access)}})})).then((function(e){t.setState({username:e.data.username,signupError:"",loginError:""})})).catch((function(){t.setState({loginError:"Username or Password incorrect!"})}))}},{key:"handleSignup",value:function(e){var t=this;h.a.post("https://eventblog12231.herokuapp.com/dataapis/users",e).then((function(e){localStorage.setItem("refresh",e.data.token.refresh),t.setState({username:e.data.username,signupError:"",loginError:""})})).catch((function(e){t.setState({signupError:"Username already exists!"})}))}},{key:"handleLogout",value:function(){localStorage.removeItem("access"),localStorage.removeItem("refresh"),this.setState({username:""})}},{key:"render",value:function(){var e;return e=this.state.username?r.a.createElement("div",null,r.a.createElement(j,{currentUser:this.state.username,onLogout:this.handleLogout}),r.a.createElement(S,null)):r.a.createElement("div",null,r.a.createElement(x,{handleLogin:this.handleLogin,error:this.state.loginError}),r.a.createElement(D,{handleSignup:this.handleSignup,error:this.state.signupError})),r.a.createElement("div",null,e)}}]),t}(r.a.Component);a(64);var R=function(){return r.a.createElement("div",null,r.a.createElement("header",{className:"jumbotron"},r.a.createElement("h1",{className:"text-center"},"Event Blog")),r.a.createElement(L,null),r.a.createElement("footer",{className:"container-fluid p-2"},r.a.createElement("p",{className:"py-4"},"By LWBJ")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.6f3159c2.chunk.js.map